MSX BASIC Library for Z88DK　Z88DKでMSX BASICのコマンドが使えるCライブラリを公開します

昔のMSX BASICのコマンドや関数をZ88DKのC言語から使えるようにしたライブラリを作りました。

元々は自分用でしたが、それなりに機能が揃ってきて面白いものができたので公開します。

MSX BASICでおなじみのSCREEN、COLOR、LOCATE、PRINTといった画面制御はもちろん、LINE、CIRCLE、PAINTなどのグラフィックス描画、PLAY文によるMML演奏、STICK/STRIGによるジョイスティック入力など、BASICの主要なコマンドを一通りカバーしています。

BASICのコマンド名がそのまま関数名になっているので、BASICに慣れた方ならすぐに使えると思います。

例えばHello Worldはこんな感じです。

#include <msxbasic/msxbasic.h>

void main(void) {
    basic_screen(1);
    basic_color(15, 1, 1);
    basic_cls();
    basic_print("Hello, MSX World!");
    basic_wait_key();
    while (1);
}

BASICで書くのとほとんど同じ感覚で書けます。

対応している機能をざっくり紹介すると、

・画面制御（SCREEN 0〜12、COLOR、LOCATE、PRINT、WIDTH、CLS等）
・グラフィックス描画（PSET、LINE、CIRCLE、PAINT、DRAW、塗りつぶし円・楕円等）
・スプライト（パターン定義、表示、衝突判定）
・サウンド（BEEP、PSG直接制御、MML演奏、3チャンネル同時演奏、効果音）
・入力（INKEY$、STICK、STRIG、PADDLE、キーボードマトリクス）
・文字列関数（LEFT$、MID$、RIGHT$、STR$、VAL、HEX$等）
・数学関数（SIN、COS、SQR、RND等）
・システム（TIME、VRAM操作、MSX機種判別、BIOS呼び出し等）
・VDP直接アクセス（V9938/V9958コマンド）

といった感じで、MSX BASICの主要機能はだいたい揃っています。MSX1からMSX2+、turbo Rまで対応しています。

このライブラリを使用したサンプルプログラムも11本用意しました。テキスト表示からグラフィックス、サウンド、入力、スプライトまで一通り試せるようになっています。

リポジトリのexamplesフォルダの中に入っています。

コンパイルにはZ88DK（最新のnightly build推奨）が必要です。

ビルドはbuild.batでライブラリをコンパイルして、build_sample.batでサンプルをビルドできます。

今後はドキュメントの充実やAPIの改善もしていきたいと思います。

GitHub:
https://github.com/uosoft/msxbasic-z88dk
